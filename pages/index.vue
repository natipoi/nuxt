<template>
  <main>
      <!-- main visual -->
      <section class="main-section">
          <div id="main-visual">
              <h1>今、あなたに、最適な運動を。</h1>
              <p class="p1">FitpoiはAIが自動で今のあなたに最適なワークアウトメニューを<span class="break-span"></span>生成＋記録する次世代フィットネスアプリです。</p>
              <a href="https://apps.apple.com/jp/app/fitpoi/id1512644821" class="positive-button">
              <svg role="img" viewBox="0 0 24 24" class="apple-icon"><path d="M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z"/></svg>
              アプリをダウンロードする</a>
              <p class="p3 main-visual-caution">*Fitpoiは現在Androidには対応しておりません。</p>
          </div>
          <div class="gradation"></div>


      </section>

      <!-- app's introduction -->
      <section class="section">
          <!-- app's feature-->
          <div class="app-feature">
              <!-- app's image-->
              <div class="app-image">
                  <img src="~/assets/sp1.jpeg" width="100%">
              </div>
              <!-- app's description-->
              <div class="app-description">
                  <p class="p1">あなたの</p>
                  <ul>
                      <li>筋肉の疲労度</li>
                      <li>運動のゴール</li>
                      <li>運動の経験</li>
                      <li>過去の運動履歴</li>
                      <li>持っている器具</li>
                  </ul>
                  <p class="p1">をAIが学習し、常に最も効率の良いワークアウトメニューを生成。</p>
              </div>
          </div>

          <!-- app's feature-->
          <div class="app-feature">
              <!-- app's image-->
              <div class="app-image">
                  <img src="~/assets/sp2.jpeg" width="100%">
              </div>
              <!-- app's description-->
              <div class="app-description">
                  <p class="p1">ワークアウト中は直感的な画面で、</p>
                  <ul>
                      <li>セット</li>
                      <li>回数 / 秒数</li>
                      <li>重量</li>
                  </ul>
                  <p class="p1">のスムーズな記録をサポート。</p>
              </div>
          </div>

          <!-- app's feature-->
          <div class="app-feature">
              <!-- app's image-->
              <div class="app-image">
                  <img src="~/assets/sp3.jpeg" width="100%">
              </div>
              <!-- app's description-->
              <div class="app-description">
                  <p class="p1">ヘルスケアと連動して、日々のワークアウトを効果的にトラッキング。</p>
              </div>
          </div>

          <div class="positive-button-wrap">
              <a href="https://apps.apple.com/jp/app/fitpoi/id1512644821" class="positive-button">
              <svg role="img" viewBox="0 0 24 24" class="apple-icon"><path d="M7.078 23.55c-.473-.316-.893-.703-1.244-1.15-.383-.463-.738-.95-1.064-1.454-.766-1.12-1.365-2.345-1.78-3.636-.5-1.502-.743-2.94-.743-4.347 0-1.57.34-2.94 1.002-4.09.49-.9 1.22-1.653 2.1-2.182.85-.53 1.84-.82 2.84-.84.35 0 .73.05 1.13.15.29.08.64.21 1.07.37.55.21.85.34.95.37.32.12.59.17.8.17.16 0 .39-.05.645-.13.145-.05.42-.14.81-.31.386-.14.692-.26.935-.35.37-.11.728-.21 1.05-.26.39-.06.777-.08 1.148-.05.71.05 1.36.2 1.94.42 1.02.41 1.843 1.05 2.457 1.96-.26.16-.5.346-.725.55-.487.43-.9.94-1.23 1.505-.43.77-.65 1.64-.644 2.52.015 1.083.29 2.035.84 2.86.387.6.904 1.114 1.534 1.536.31.21.582.355.84.45-.12.375-.252.74-.405 1.1-.347.807-.76 1.58-1.25 2.31-.432.63-.772 1.1-1.03 1.41-.402.48-.79.84-1.18 1.097-.43.285-.935.436-1.452.436-.35.015-.7-.03-1.034-.127-.29-.095-.576-.202-.856-.323-.293-.134-.596-.248-.905-.34-.38-.1-.77-.148-1.164-.147-.4 0-.79.05-1.16.145-.31.088-.61.196-.907.325-.42.175-.695.29-.855.34-.324.096-.656.154-.99.175-.52 0-1.004-.15-1.486-.45zm6.854-18.46c-.68.34-1.326.484-1.973.436-.1-.646 0-1.31.27-2.037.24-.62.56-1.18 1-1.68.46-.52 1.01-.95 1.63-1.26.66-.34 1.29-.52 1.89-.55.08.68 0 1.35-.25 2.07-.228.64-.568 1.23-1 1.76-.435.52-.975.95-1.586 1.26z"/></svg>
              アプリをダウンロードする</a>
              <p class="p3">最初の3ワークアウトは無料！</p>
          </div>
          
      </section>

      <!-- instagram -->
      <section class="section" id="insta-box">
          <div id="insta-hashtag">
              <p class="p4">#fitpoi</p>
          </div>
          <div id="insta-images-wrap">
              <span class="insta-images-wrap-arrow arrow-left tap-arrow" attr="left"></span>
              <span class="insta-images-wrap-arrow arrow-right tap-arrow" attr="right"></span>
              <ul id="insta-images">
                  <li id="first-insta-image"><a href="https://www.instagram.com/fitpoi_app/"><img src="~/assets/insta/insta1.jpg" width="100%"></a></li>
                  <li><a href="https://www.instagram.com/fitpoi_app/"><img src="~/assets/insta/insta2.jpg" width="100%"></a></li>
                  <li><a href="https://www.instagram.com/fitpoi_app/"><img src="~/assets/insta/insta3.jpg" width="100%"></a></li>
              </ul>
          </div>
          <ul class="sns-icon">
              <li><a href="https://www.instagram.com/fitpoi_app/" class="insta"></a></li>
              <li><a href="https://www.facebook.com/fitpoi" class="fb"></a></li>
              <li><a href="https://twitter.com/Fitpoi1" class="twitter"></a></li>
          </ul>

      </section>

  </main>

</template>
<style>
    .main-section { position: relative;background: url(~assets/top-sp.png) top left / 100% auto no-repeat;}

    #insta-hashtag {padding: 20px; margin: 0 auto;}
    #insta-box {background-color: #fff; }
    #insta-images-wrap {position: relative; white-space: nowrap; overflow: hidden; }
    #insta-images {display: flex; flex-wrap: nowrap;height: 250px; margin-bottom: 0; list-style: none; transform: translateX(calc((100% - 250px)/2)); transition: transform 0.5s; overflow-x:visible}
    #insta-images li {width: 250px;height: 250px;flex-shrink: 0;flex-grow: 0;}
    .insta-images-wrap-arrow {position: absolute;top:0;bottom:0; width: calc((100% - 250px)/2); background: rgba(255, 255, 255, 0.8);z-index: 100;}
    .insta-images-wrap-arrow:hover {cursor: pointer;}
    #insta-box .sns-icon {display: flex; justify-content:center;padding: 30px 0; font-size: 1.8rem;  }
    #insta-box .sns-icon li a {width: 100px;}
    .arrow-left {left:0; opacity: 0.0;}
    .arrow-right {right: 0;}
    .arrow-left::before, .arrow-right::before{font-family: "Font Awesome 5 Free"; font-weight: 900; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 30px; color: #969594}
    .arrow-left::before {content: "\f104"; }
    .arrow-right::before {content: "\f105"; }

    @media screen and (min-width: 720px) {
    .main-section { position: relative;background: url(~assets/top-pc.png) top left / 100% auto no-repeat;}
        #insta-hashtag{ padding-left: 87.5px;padding-right: 87.5px;}
        #insta-images {transform: translateX(87.5px);height: 175px;}
        #insta-box .sns-icon {font-size: 1.5rem;}
        .insta-images-wrap-arrow {width: 87.5px}
        #insta-images li {width: 175px;}
        .main-section { margin: 0 auto;}
        #main-visual {background-color: transparent; height: calc(100vw * 0.4);max-height: 550px;}
        .main-visual-caution {display: none;}
        .break-span {display:block;}

    }
</style>

<script>
if (process.client) {


window.onload = function() {
    const imageNum = $("#insta-images").children().length
    var windowWidth = $(window).width()
    var now = 1

    var beforeresize = $(window).width()
    $(window).resize(function(){
        windowWidth = $(window).width()
        if (windowWidth >= 720 && beforeresize < 720) {
            $("#insta-images").css("transform", "translateX(87.5px)");
            now = 1
            $('.arrow-left').css("opacity", "0.0");
            $('.arrow-right').css("opacity", "1.0");
        } else if (windowWidth < 720 && beforeresize >= 720)  {
            $("#insta-images").css("transform", "translateX(calc((100% - 250px)/2))");
            now = 1
            $('.arrow-left').css("opacity", "0.0");
            $('.arrow-right').css("opacity", "1.0");

        }
        beforeresize = windowWidth
    })

    $(".tap-arrow").on("click", function(){
        console.log(now)
        var attr = $(this).attr("attr")
        

        var nowPosi = $("#insta-images").css("transform")
        nowPosi = nowPosi.split('(')[1];
        nowPosi = nowPosi.split(')')[0];
        var x = nowPosi.split(', ')[4];
        var instaWidth = $("#first-insta-image").width()

        x = attr === "right" ? - (instaWidth - parseInt(x)): instaWidth + parseInt(x);
        var slide = true

        if (attr === "right" && 
        ((windowWidth >= 720 && now === imageNum - 2) || 
        (windowWidth < 720 && now === imageNum))) {
            slide = false
        } else if (attr === "left" &&  now === 1) {
            slide = false
        }
        if (slide) {
            $("#insta-images").css({
                transform: `translateX(${x}px)`
            })
            if (attr === "right"){
                now = windowWidth >= 720 ? now + 3 : now + 1;
                if ((windowWidth >= 720 && now === imageNum * 3 + 1) || (windowWidth < 720 && now === imageNum)){
                    $('.arrow-right').css("opacity", "0.0");
                }
                if (now !== 1 ){
                    $('.arrow-left').css("opacity", "1.0");
                }
            } else {
                now = windowWidth >= 720 ? now - 3 : now - 1;
                if (now === 1 ){
                    $('.arrow-left').css("opacity", "0.0");
                }
                if ((windowWidth >= 720 && now !== imageNum * 3 + 1) || 
                (windowWidth < 720 && now !== imageNum)){
                    $('.arrow-right').css("opacity", "1.0")
                }
            }
            
        }
        

    })
}
}

</script>
